{{- /*
	―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
	BGN: SEMANTIC WEB
	―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――

	****************************
	** Syntax: JSON-LD        **
	** Vocab: schema.org      **
	**                        **
	** Schema: Article        **
	****************************

	Links:
		- https://www.w3.org/standards/semanticweb/
		- https://schema.org/Article

	About SemWeb:
		- https://im.youronly.one/techmagus/

	How-To:
		- https://github.com/

	―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
	END: SEMANTIC WEB
	―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
*/}}
{{- $iso8601 := "2006-01-02T15:04:05-07:00" -}}
{{- $iso8601d := "2006-01-02" -}}
{{- $datePublished := or (.PublishDate) (.Date) -}}
{{- $dateFirstPublished := dateFormat $iso8601d $datePublished | safeHTML -}}
{{- $dateModified := .Lastmod.Format $iso8601 | safeHTML -}}
{{- $dateModifiedYear := .Lastmod.Format "2006" | safeHTML -}}
{{- $dateExpiry := "" -}}
{{- if not .ExpiryDate.IsZero }}{{$dateExpiry = .ExpiryDate.Format $iso8601d | safeHTML }}{{ end -}}
{{- $authors := .Site.Data.persons -}}
{{- $siteAuthor := index $authors ($.Param "semweb.person") }}
		{
			"@type": ["Article"{{ with $.Param "semweb.isblog" }}, "BlogPosting"{{ end }}],
			"@id": "{{ .Permalink }}#article",

			{{- /* Properties from Article */}}
			{{- /* note: Disabled since Google is ignoring it anyway
			"articleBody": "{{ .Plain }}",
			*/}}
			"articleSection": [{{ range $i, $v := .Params.categories }}{{ if $i }}, {{ end }}"{{ $v }}"{{ end }}],
			"wordCount": "{{ .Plain | countwords }}",

			{{- /* Properties from CreativeWork */}}
			{{- /* "acquireLicensePage": "", */}}
			{{ with $.Param "author.person" }}{{ $author := index $authors . }}"author": [
				{
					"@id": "{{ ($.Param "author.id") | default $author.id }}"{{ with or ($.Param "author.name") ($.Param "author.url") }},{{ end }}
					{{ with ($.Param "author.name") }}"name": "{{ . }}",{{ end }}
					{{ with ($.Param "author.url") }}"url": "{{ . }}",{{ end }}
					{{ with or ($.Param "author.name") ($.Param "author.url") }}"@type": "Person"{{ end }}
				}
			],{{ else }}"author": [
				{
					"@id": "{{ $siteAuthor.id }}"
				}
			],{{ end }}
			{{- /* "citation": [
				{
					"@id": "",
					"url": "",
					"@type": "CreativeWork"
				}
			], */}}
			{{- /* "contributor": [
				{
					"@id": "",
					"url": "",
					"@atype": "Person"
				}
			], */}}
			{{ with $.Param "author.person" }}{{ $author := index $authors . }}"copyrightHolder": [
				{
					"@id": "{{ ($.Param "author.id") | default $author.id }}"{{ with or ($.Param "author.name") ($.Param "author.url") }},{{ end }}
					{{ with ($.Param "author.name") }}"name": "{{ . }}",{{ end }}
					{{ with ($.Param "author.url") }}"url": "{{ . }}",{{ end }}
					{{ with or ($.Param "author.name") ($.Param "author.url") }}"@type": "Person"{{ end }}
				}
			],{{ else }}"author": [
				{
					"@id": "{{ $siteAuthor.id }}"
				}
			],{{ end }}
			{{- /* "copyrightNotice": "", */}}
			"copyrightYear": "{{ $dateModifiedYear }}",
			"creativeWorkStatus": "Published",
			{{ with $.Param "author.person" }}{{ $author := index $authors . }}"creator": [
				{
					"@id": "{{ ($.Param "author.id") | default $author.id }}"{{ with or ($.Param "author.name") ($.Param "author.url") }},{{ end }}
					{{ with ($.Param "author.name") }}"name": "{{ . }}",{{ end }}
					{{ with ($.Param "author.url") }}"url": "{{ . }}",{{ end }}
					{{ with or ($.Param "author.name") ($.Param "author.url") }}"@type": "Person"{{ end }}
				}
			],{{ else }}"author": [
				{
					"@id": "{{ $siteAuthor.id }}"
				}
			],{{ end }}
			{{- /* "creditText": "", */}}
			"dateCreated": "{{ $dateFirstPublished }}",
			"dateModified": "{{ $dateModified }}",
			"datePublished": "{{ $dateFirstPublished }}",
			{{- /* "discussionUrl": "", */}}
			{{ with $dateExpiry }}"expires": "{{ . }}",{{ end }}
			{{- /* "hasPart": "", */}}
			"headline": "{{ .LinkTitle }}",
			"inLanguage": "{{ or (.Language.Params.languagecodehtml) (.Language.Lang) }}",
			{{- /* "isBasedOn": "", */}}
			"isPartOf": {
				"@id": "{{ .Permalink }}#webpage"
			},
			{{ with .Keywords }}"keywords": [{{ range $i, $e := . }}{{ if $i }}, {{ end }}"{{ $e }}"{{ end }}],{{ end }}
			{{ with or (.Param "license") (.Site.Params.semweb.license) }}"license": "{{ . }}",{{ end }}
			{{ with .Site.Params.semweb.publisher }}"publisher": {
				"@id": "{{ . }}#organization"
			},{{ end }}
			{{- /* "sponsor": "", */}}
			{{- /* "thumbnailUrl": "", */}}
			{{- /* "translationOfWork": "", */}}
			{{- /* "translator": "", */}}
			{{- /* "usageInfo": "", */}}
			{{- /* "workTranslation": "", */}}

			{{- /* Properties from CreativeWork */}}
			{{- /* "alternateName": "", */}}
			{{ with or (.Description) (.Summary) }}"description": "{{ . | plainify }}",{{ end }}
			"image": [ {{ range $i, $v := .Params.images }}{{ if $i }}, {{ end }}
				{ 
					"url": "{{ . }}",
					"@type": "ImageObject"
				}{{ end }}
			],
			"mainEntityOfPage": {
				"@id": "{{ .Permalink }}#webpage"
			},
			"name": "{{ .LinkTitle }}",
			{{- /* "sameAs": "", */}}
			{{- /* "subjectOf": "", */}}
			"url": "{{ .Permalink }}"
		}